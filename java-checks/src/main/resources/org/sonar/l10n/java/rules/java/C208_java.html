<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style>
body {
	width: 96%;
	background-color: white;
	font-size: 14px;
	font-family: "돋움";
    padding: 0;
}

h1 {
  color: black;
  text-align: left;
  font-weight: bold;
}

p {
	font-size: 16px;
	background-color: rgba(210, 210, 210);
}

pre {
	display: block;
	white-space: pre-wrap;
}

</style>
</head>
<body>


<!-- 주제목 및 부제목 -->
<!-- 주 제목은 룰 이름, 부 제목은 "해당 룰이 속한 카테고리 - 세부 카테고리"로 한다. -->

<h1>충분하지 않은 키 길이 사용</h1>
보안 기능
<hr><br>


<!-- 1. 개요 -->

<p>개요</p>
길이가 짧은 키를 사용하는 것은 암호화 알고리즘을 취약하게 만들 수 있다. 키는 암호화 및 복호화에
사용되는데, 검증된 암호화 알고리즘을 사용하더라도 키 길이가 충분히 길지 않으면 짧은 시간 안에
키를 찾아낼 수 있고 이를 이용해 공격자가 암호화된 데이터나 패스워드를 복호화 할 수 있게 된다.
<br><br><br>


<!-- 2. 보안 대책 -->

<p>보안 대책</p>
RSA 알고리즘은 적어도 2,048 비트 이상의 길이를 가진 키와 함께 사용해야 하고, 대칭암호화 알고
리즘(Symmetric Encryption Algorithm)의 경우에는 적어도 128비트 이상의 키를 사용한다.
<br><br><br>


<!-- 3. 코드 예제 -->

<p>코드 예제</p>
다음의 예제는 보안성이 강한 RSA 알고리즘을 사용함에도 불구하고, 키 사이즈를 작게 설정함으로써
프로그램의 보안약점을 야기한 경우이다.
<br><br>

<!-- 3-1. 안전하지 않은 코드 -->
<!-- 	제목 배경 및 테두리 컬러 : #F5A9A9 -->
<!-- 	제목 패딩 : top과 bottom 각각 5픽셀, left와 right 각각 10픽셀 -->
<!-- 	코드는 <pre><code> 태그 내부에 삽입하며, 코드 색 변경은 <span> 태그를 이용하여 변경 -->

<span style = "background-color:#F5A9A9; padding-top: 5px; padding-right: 10px; padding-left: 10px; padding-bottom: 5px"> 
안전하지 않은 코드 </span><br>
<div style ="border:5px solid #F5A9A9; border-color:#F5A9A9">
<pre><code>
public static final String ALGORITHM = "RSA";
public static final String PRIVATE_KEY_FILE = "C:/keys/private.key";
public static final String PUBLIC_KEY_FILE = "C:/keys/public.key";
public static void generateKey() {
	try {
		final KeyPairGenerator keyGen = KeyPairGenerator.getInstance(ALGORITHM);
		<span style = "color:green">//RSA 키 길이를 1024 비트로 짧게 설정하는 경우 안전하지 않다.</span>
		<span style = "color:red">keyGen.initialize(1024);</span>
		final KeyPair key = keyGen.generateKeyPair();
		File privateKeyFile = new File(PRIVATE_KEY_FILE);
		File publicKeyFile = new File(PUBLIC_KEY_FILE);
</code></pre>
</div>


<br><br>
공개키 암호화에 사용하는 키의 길이는 적어도 2048비트 이상으로 설정한다.
<br><br>


<!-- 3-2. 안전한 코드 -->
<!-- 	제목 배경 및 테두리 컬러 : #82E0AA -->
<!-- 	나머지 사항은 3-1. 안전하지 않은 코드 와 같음 -->

<span style = "background-color:#82E0AA; padding-top: 5px; padding-right: 10px; padding-left: 10px; padding-bottom: 5px"> 
안전한 코드 </span><br>
<div style ="border:5px solid #F5A9A9; border-color:#82E0AA">
<pre><code>
public static final String ALGORITHM = "RSA";
public static final String PRIVATE_KEY_FILE = "C:/keys/private.key";
public static final String PUBLIC_KEY_FILE = "C:/keys/public.key";
public static void generateKey() {
	try {
		final KeyPairGenerator keyGen = KeyPairGenerator.getInstance(ALGORITHM);
		<span style = "color:blue">keyGen.initialize(2048);</span>
		final KeyPair key = keyGen.generateKeyPair();
		File privateKeyFile = new File(PRIVATE_KEY_FILE);
		File publicKeyFile = new File(PUBLIC_KEY_FILE);
</code></pre>
</div>


</body>
</html>